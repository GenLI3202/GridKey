{
    "_specification": {
        "name": "GridKey Optimizer Service API - 12h Input Template",
        "version": "2.0",
        "description": "Input format for POST /api/v1/optimize-mpc endpoint",
        "endpoint": "/api/v1/optimize-mpc",
        "method": "POST"
    },
    "_notes": {
        "time_horizon": "12 hours",
        "resolution": "15-minute timesteps",
        "total_timesteps": 48,
        "block_prices": "4-hour blocks (3 blocks for 12h)",
        "pricing": "All prices in EUR (MWh for energy, MW for capacity)"
    },
    "request_body": {
        "location": "Munich",
        "country": "DE_LU",
        "model_type": "III-renew",
        "c_rate": 0.5,
        "alpha": 1.0,
        "market_prices": {
            "_description": "Market price data for 12 hours",
            "_note_15min": "48 values required (12h ร 4 timesteps/hour)",
            "_note_4h_blocks": "3 values required (12h รท 4 hours/block)",
            "day_ahead": [
                54.89, 54.89, 54.89, 54.89,
                52.30, 51.15, 49.80, 48.50,
                45.20, 42.80, 41.50, 40.90,
                39.50, 38.80, 38.20, 37.90,
                38.50, 39.20, 40.50, 42.10,
                44.30, 46.80, 49.20, 51.50,
                53.80, 55.90, 57.40, 58.20,
                58.50, 58.10, 57.30, 56.40,
                55.60, 54.90, 54.50, 54.30,
                54.40, 55.00, 55.80, 56.70,
                57.50, 58.10, 58.40, 58.50,
                58.30, 57.90, 57.40, 56.80
            ],
            "afrr_energy_pos": [
                127.29, 101.87, 85.42, 72.15,
                60.30, 52.40, 45.80, 40.50,
                35.20, 30.80, 27.50, 24.90,
                22.30, 20.50, 19.20, 18.10,
                17.50, 17.20, 17.10, 17.30,
                18.79, 20.10, 22.40, 25.30,
                28.50, 32.40, 36.80, 41.50,
                46.30, 49.33, 52.10, 54.40,
                56.20, 57.50, 58.30, 58.80,
                58.90, 58.60, 57.90, 56.70,
                55.10, 53.20, 51.10, 49.00,
                85.45, 75.01, 68.20, 62.50
            ],
            "afrr_energy_neg": [
                56.90, 52.40, 48.50, 45.20,
                42.80, 40.90, 39.50, 38.40,
                37.80, 37.50, 37.40, 37.60,
                38.10, 38.80, 39.70, 40.80,
                42.10, 43.50, 45.00, 46.40,
                47.80, 49.00, 50.10, 50.86,
                51.20, 51.30, 51.10, 50.60,
                49.80, 48.70, 47.40, 45.90,
                44.20, 42.40, 40.50, 38.60,
                36.70, 34.90, 33.20, 31.70,
                30.40, 29.40, 28.70, 28.30,
                28.20, 28.40, 28.90, 29.80,
                50.86, 50.10, 49.30, 48.50,
                109.74, 95.20, 82.40, 71.80
            ],
            "_note_block_prices": "4-hour block prices (forward-filled by adapter)",
            "fcr": [38.52, 42.30, 45.80],
            "afrr_capacity_pos": [14.45, 16.20, 18.50],
            "afrr_capacity_neg": [0.62, 0.58, 0.65]
        },
        "renewable_generation": [
            0.0, 0.0, 0.0, 0.0,
            0.0, 0.0, 0.0, 0.0,
            0.0, 0.0, 0.0, 0.0,
            0.0, 0.0, 50.0, 150.0,
            300.0, 500.0, 700.0, 850.0,
            950.0, 1000.0, 980.0, 900.0,
            800.0, 650.0, 500.0, 350.0,
            200.0, 100.0, 50.0, 20.0,
            0.0, 0.0, 0.0, 0.0,
            0.0, 0.0, 0.0, 0.0,
            0.0, 0.0, 0.0, 0.0,
            0.0, 0.0, 0.0, 0.0
        ],
        "_renewable_note": "Optional - omit or set to null for Model I/II/III without renewable integration"
    },
    "_field_descriptions": {
        "location": "City name for weather/price correlation",
        "country": "Country code (DE_LU, AT, CH, HU, CZ)",
        "model_type": "I, II, III, or III-renew (renewable integration)",
        "c_rate": "Battery C-rate (0.25, 0.33, 0.5)",
        "alpha": "Degradation cost weight (0.5-1.0 typical)",
        "market_prices.day_ahead": "Day-ahead spot prices (EUR/MWh), 48 values",
        "market_prices.afrr_energy_pos": "aFRR+ energy prices (EUR/MWh), 48 values",
        "market_prices.afrr_energy_neg": "aFRR- energy prices (EUR/MWh), 48 values",
        "market_prices.fcr": "FCR capacity prices (EUR/MW), 3 blocks",
        "market_prices.afrr_capacity_pos": "aFRR+ capacity prices (EUR/MW), 3 blocks",
        "market_prices.afrr_capacity_neg": "aFRR- capacity prices (EUR/MW), 3 blocks",
        "renewable_generation": "Renewable forecast (kW), 48 values, optional"
    },
    "_example_curl": {
        "command": "curl -X POST http://localhost:8000/api/v1/optimize-mpc \\",
        "header": "-H 'Content-Type: application/json' \\",
        "data": "-d @optimizer_input_template.json"
    },
    "_response_format": {
        "status": "success",
        "data": {
            "objective_value": "Total objective value (EUR)",
            "net_profit": "Net profit after degradation (EUR)",
            "revenue_breakdown": "Revenue by market (da, fcr, afrr_cap, afrr_energy, renewable_export)",
            "degradation_cost": "Total degradation cost (EUR)",
            "cyclic_aging_cost": "Cyclic aging cost (EUR)",
            "calendar_aging_cost": "Calendar aging cost (EUR)",
            "schedule": "List of 48 ScheduleEntry objects",
            "soc_trajectory": "List of 48 SOC values (0-1)",
            "renewable_utilization": "Renewable stats (if Model III-renew)",
            "solve_time_seconds": "Solver time",
            "solver_name": "Solver used",
            "model_type": "Model type used",
            "status": "optimal/feasible/infeasible/timeout"
        }
    }
}
